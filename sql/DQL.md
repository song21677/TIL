# DQL(Data Query Language, 질의어)
```SQL
-- 번호는 실행되는 순서를 의미한다.
-- 5
SELECT {*, 컬럼[, ...]}
-- 1
FROM 테이블명
-- 2
WHERE 조건식
-- 3
GROUP BY {컬럼, 표현식}
-- 4
HAVING 조건식
-- 6
ORDER BY {컬럼, 표현식} [ASC|DESC]
```
1. FROM - 지정한 테이블로부터 데이터를 조회한다.
2. WHERE - 지정한 테이블에서 지정한 조건에 맞는 레코드만 선별해준다. (Selection 기능)
3. GROUP BY - 하나의 그룹이었던 테이블을 컬럼, 표현식 별로 그룹을 나눠준다. 그룹의 정보를 얻고 싶을 때 사용한다.
4. HAVING - 지정된 조건과 일치한 그룹만 추출해줄 수 있다. (Selection 기능)
5. SELECT - 원하는 컬럼을 지정해 값들을 조회할 수 있다.(Projection 기능)
6. ORDER BY - 정렬되지 않은 데이터들을 지정한 컬럼, 표현식으로 정렬해준다.

## 1. 3가지 기능
1. **Selection 기능**: SELECT문 요청 시 테이블의 행(레코드)이 반환되는 기능
2. **Projection 기능**: SELECT문 요청 시 테이블의 열(컬럼)이 반환되는 기능
3. **Join 기능**: 여러 테이블에 공통적으로 존재하는 컬럼을 사용하여 한꺼번에 서로 다른 테이블에 저장된 데이터를 가져오는 기능

## 2. 작성 규칙
1. 여러 줄로 작성할 수 있지만 가독성 있게 보통 줄을 구분하여 작성한다.
2. 대소문자를 구별하지 않지만 일반적으로 키워드는 대문자, 컬럼명, 테이블명과 같이 사용자가 지정해줄 수 있는 곳은 소문자로 작성한다.
3. 세미콜론을 지정하여 명령어의 끝을 알려줘야 한다.
```SQL
SELECT last_name, salary
FROM employee;
```

## 3. 검색 결과 
1. 문자 데이터와 날짜 데이터의 경우 왼쪽 정렬이 기본이다.
2. 수치 데이터는 오른쪽 정렬이 기본이다.

<br><br>

# 1. SELECT절
데이터베이스에 저장된 데이터를 조회할 때 사용하는 SQL문장으로 지정한 컬럼의 정보들을 보여준다. (Projection 기능)

## 1-1. 문법
조회한 컬럼 값들을 함수, 연산을 통해 가공해 보여줄 수 있다. 
```sql
SELECT [DISTINCT] {*,column [Alias], ...}
FROM 테이블명;
```

## 1-2. 별칭 (alias)
**연산식의 컬럼 헤딩** <br>
```SQL
SELECT salary * 12 FROM employees;
``` 
* 위 명령어를 수행하면 컬럼헤딩에 ``salary * 12``로 표시된다. 
* 이것은 새로운 컬럼이 아니고 단지 출력한 것이다. 
* 복잡한 연산을 사용한다면 컬럼 헤딩에 표시된 내용만으로 어떤 정보인지 의미 전달이 알 수 없다.
* 이때 별칭을 사용해 헤딩에 의미 전달할 수 있다.
* ex) ``SELECT salary * 12 [as] salary FROM employees;``
* 만약 별칭에 공백문자 또는 특수문자($,_,#)를 사용하기 위해서는 반드시 " "로 감싸줘야 한다.

## 1-3. DISTINCT
중복되는 컬럼의 레코드들을 제거해준다. 

* 출력 시 오름차순으로 정렬되어 출력된다.
* DISTINCT 키워드 뒤에 여러 개의 컬럼을 설정하면 모든 컬럼들이 영향을 받는다.
  
## 1-4. dual 테이블
* dual 테이블은 **SYS 관리자**가 소유한 테이블로 **varchar2(1) 타입**의 dummy라는 컬럼을 가지고 있다.
* 연산식은 특정 테이블에서 가져오는 값이 아니기 때문에 마땅히 기술할 테이블이 없기 때문에 이때 다음 같이 dual 테이블을 사용한다.
    ```sql
    SELECT 400*12 FROM dual;
    ```
* 이처럼 dual 테이블은 **복잡한 연산식 또는 현재 날짜 등을 조회할 때** 많이 사용된다.

<br>

# 2. WHERE절
조건에 일치하는 레코드만 선택 가능하게 해준다. (Selection 기능)

**문법**
```SQL
SELECT [DISTINCT] {*, column [Alias], ...} FROM 테이블명 WHERE 조건식;
```

<br>

# 3. GROUP BY절
특정 컬럼값을 기준으로 그룹을 묶을 때 사용하는 방법이다. GROUP BY를 사용하여 그룹핑하면 SELECT 절에서 그룹함수와 같이 사용될 수 있다.

## 3-1. 그룹핑 방법
1. 자동으로 묶임
   * 기본적으로 테이블은 하나로 묶여 있음.
   * 그룹함수를 제한없이 사용할 수 있다.
2. 명시적으로 묶임
   * group by 컬럼|표현식
   * 요청 text가 ~별로 요청하면 무조건 묶어야 한다.


## 3-2. 문법
```SQL
SELECT [단순 컬럼,] 그룹함수, 그룹함수2
FROM 테이블명
[WHERE 조건식]
[GROUP BY 단순 컬럼]
[ORDER BY 표현식];
```

## 3-3. 특징
1. **WHERE절에는 그룹함수를 사용할 수 없다.**
* SQL 실행 순서가 WHERE 다음 GROUP BY이므로 그룹으로 묶이지 않았는데 그룹함수를 먼저 사용하는 것은 논리적이지 않다.
2. **GROUP BY 절 뒤에는 컬럼 별칭 및 컬럼 순서 위치값을 사용할 수 없다.**
* SELECT보다 GROUP BY가 먼저 실행되기 때문
3. **SELECT절 뒤에 사용할 수 있는 컬럼은 GROUP BY뒤에 기술된 컬럼이거나 그룹함수가 적용된 컬럼만 사용 가능하다.**
* 그룹함수와 일반 컬럼과 같이 사용하면 다수의 레코드와 하나의 레코드가 합쳐져서 조회돼야 하는데 논리적으로 그럴 수 없다.
   ```SQL
   SELECT id, AVG(salary) 평균월급
   FROM employees;
   ```
4. **ORDER BY절을 사용하여 정렬할 때 다중 정렬이 가능한 것처럼 GROUP BY를 사용하여 그룹핑 할 때 다중 그룹도 가능하다.**

<br>

# 4. HAVING절
GROUP BY절에 의해 생성된 결과 중에서 조건과 일치하는 그룹을 추출할 때 사용된다.

**문법**
```SQL
SELECT [단순 컬럼,] 그룹함수, 그룹함수2
FROM 테이블명
[WHERE 조건식]
[GROUP BY 단순 컬럼]
[HAVING 조건식]
[ORDER BY 표현식]
```
# 5. ORDER BY절
특정 컬럼을 기준으로 정렬하고 싶을 때 사용한다. (기본적으로 테이블에 저장된 데이터는 정렬되어 있지 않다.)

## 5-1. 문법
```sql
SELECT [DISTINCT] {*, column [Alias], ...}
FROM 테이블명
[WHERE 조건식]
ORDER BY {column, 표현식} [ASC|DESC], [{column, 표현식} [ASC|DESC], ...]
```

## 5-2. 특징
1. 표현식으로는 컬럼의 alias와 SELECT절에서 명시된 컬럼의 순서값을 지정할 수 있다.
2. 정렬 가능한 데이터는 수치, 문자, 날짜 모두 가능하다.
3. 오라클은 null을 가장 큰 값으로 처리한다.
